CREATE TABLE CATEGORY (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NAME VARCHAR2(100) NOT NULL UNIQUE
);

CREATE TABLE BRAND (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NAME VARCHAR2(100) NOT NULL UNIQUE
);

CREATE TABLE PRODUCT (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NAME VARCHAR2(150) NOT NULL,
  SKU  VARCHAR2(60)  NOT NULL UNIQUE,
  PRICE NUMBER(12,2) NOT NULL,
  STOCK NUMBER(10)   DEFAULT 0 NOT NULL,
  CATEGORY_ID NUMBER NOT NULL,
  BRAND_ID    NUMBER NOT NULL,
  CONSTRAINT FK_PRODUCT_CATEGORY FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORY(ID),
  CONSTRAINT FK_PRODUCT_BRAND    FOREIGN KEY (BRAND_ID)    REFERENCES BRAND(ID)
);

CREATE TABLE CUSTOMER (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  FULL_NAME VARCHAR2(150) NOT NULL,
  EMAIL     VARCHAR2(150) UNIQUE,
  PHONE     VARCHAR2(30)
);

CREATE TABLE SALE_ORDER (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  ORDER_DATE TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
  CUSTOMER_ID NUMBER NOT NULL,
  TOTAL NUMBER(14,2) DEFAULT 0 NOT NULL,
  CONSTRAINT FK_ORDER_CUSTOMER FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(ID)
);

CREATE TABLE ORDER_ITEM (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  ORDER_ID   NUMBER NOT NULL,
  PRODUCT_ID NUMBER NOT NULL,
  QUANTITY   NUMBER(10) NOT NULL,
  UNIT_PRICE NUMBER(12,2) NOT NULL,
  CONSTRAINT FK_ITEM_ORDER   FOREIGN KEY (ORDER_ID)  REFERENCES SALE_ORDER(ID),
  CONSTRAINT FK_ITEM_PRODUCT FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(ID)
);
